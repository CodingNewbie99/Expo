---
title: Create and share internal distribution build
sidebar_title: Internal distribution build
description: Learn about what are internal distribution builds, why we need them, and how to create them.
---

import { Step } from '~/ui/components/Step';
import { Terminal } from '~/ui/components/Snippet';
import ImageSpotlight from '~/components/plugins/ImageSpotlight';
import { Collapsible } from '~/ui/components/Collapsible';
import { Tabs, Tab } from '~/ui/components/Tabs';
import { CODE } from '~/ui/components/Text';
import { BoxLink } from '~/ui/components/BoxLink';
import { BookOpen02Icon } from '@expo/styleguide-icons';
import { ProgressTracker } from '~/ui/components/ProgressTracker';

In this chapter, we're going to learn how to set up [internal distribution builds](/guides/sharing-preview-releases/#internal-distribution). Creating an internal build is quite similar to creating a development build. The difference is that you don't need to run the development server locally for it to work.

## Internal distribution build

An internal distribution build is great for sharing an app's progress with our team (technical and non-technical stakeholders) to gather feedback without running a development server. Our team can directly install the build and test the app on their device.

## Ways to distribute an app internally

Both Google and Apple provide built-in mechanisms for sharing apps internally:

- **Android**: Using Google Play beta
- **iOS**: Using TestFlight

However, both of these traditional methods have their limitations. For example, TestFlight limits to one active build at a time.

### EAS Build for faster distribution

EAS Build speeds up the process. It creates shareable links for our builds and provides instructions on using them. It has a default configuration designed to facilitate internal distribution, offering a more efficient alternative to traditional methods.

## Steps to create an internal distribution build

To create and distribute a build with EAS Build, we need to:

- Configure a build profile
- Add test devices for iOS to a provisioning profile
- Trigger a build for Android and iOS and install them on devices

<Step label="1">

## Configure a build a profile

In the previous chapter, we learned that after initializing **eas.json** in our project, it already contains some default configuration. In this configuration, there is a pre-configured build profile called `preview`:

```json eas.json
{
  "build": {
    "preview": {
      "distribution": "internal"
    }
  }
}
```

This is all we need to create our first internal distribution build. The `preview` build profile from the above snippet has a `distribution` property whose value is set to `internal`. This value allows us to share our build URLs with anyone so they to install it on their device and do not require a development server to run the app.

As discussed in the previous chapters, for non-app store builds, Android requires **.apk** and iOS needs **.ipa** formats. This applies to internal distribution builds as well. The `distribution` when set to `internal`, automatically creates the app binary in these file formats for devices.

</Step>

<Step label="2">

## Create an internal distribution build

<Tabs>

<Tab label="Android">

Creating a preview build for Android is similar to making a development build:

- We use the `preview` profile with the `eas build` command:

<Terminal cmd={['$ eas build --platform android --profile preview']} />

- This command triggers the EAS Build, and on the Expo dashboard, we can see the build's progress:

<ImageSpotlight
  alt="Android preview build details and progress in Expo dashboard"
  src="/static/images/tutorial/eas/android-preview-build.png"
  style={{ maxWidth: 800 }}
/>

<Collapsible summary="Android app signing credentials">

Android app signing is non-restrictive. A new Android Keystore was generated for development builds, but since Android allows installing any compatible **.apk**, there's no need for a new keystore for preview builds.

</Collapsible>

</Tab>

<Tab label="iOS">

Apple has stricter rules for app distribution on iOS devices. We need an ad hoc provisioning profile, which allows explicitly listing the devices allowed to run the app.

- To add more devices, use `eas device:create`. This command registers an iOS device and gives us a URL or QR code to share for device registration:

<Terminal cmd={['$ eas device:create']} />

- This command registers an iOS device for app installation, generating a shareable URL (or QR code) for device registration.

  > **info** **Tip**: This command enables device registration at any time. However, only builds created post-registration will work on the newly added device.

- To create the preview build, we need to use the `preview` profile with the `eas build` command:

<Terminal cmd={['$ eas build --platform ios --profile preview']} />

- This command triggers the EAS Build, and on the Expo dashboard, we can see the build's progress:

<ImageSpotlight
  alt="iOS preview build details and progress in Expo dashboard"
  src="/static/images/tutorial/eas/ios-preview-build.png"
  style={{ maxWidth: 800 }}
/>

<Collapsible summary={<>Alternative method to register devices using <CODE>eas build:resign</CODE></>}>

[`eas build:resign`](/app-signing/app-credentials/#re-signing-new-credentials) command can be used to re-sign an existing iOS **.ipa** with a new ad hoc provisioning profile, eliminating the need for a full rebuild.

</Collapsible>

</Tab>

</Tabs>

</Step>

<Step label="3">

## Install an internal distribution build

To install the build on a device:

- Open the build's detail page on the Expo dashboard.
- Click **Install** under the Build artifact section to display the **Install on a test device** popup.
- Copy the link from **Send a link to a device** section and send it to the test device.

<ImageSpotlight
  alt="Internal distribution build details and install link in Expo dashboard"
  src="/static/images/tutorial/eas/distribution-link.png"
  style={{ maxWidth: 450 }}
/>

</Step>

<Step label="4">

## Run internal distribution build

Tap the app icon on your device to start the preview build. There is no need for a development server.

Since we have set up multiple app variants, we can see both the development and preview variants installed separately on our devices.

- For example, on Android:

<ImageSpotlight
  alt="Internal distribution build details and install link in Expo dashboard"
  src="/static/images/tutorial/eas/android-multi-variants-installed.png"
  style={{ maxWidth: 270 }}
/>

- On iOS:

<ImageSpotlight
  alt="Internal distribution build details and install link in Expo dashboard"
  src="/static/images/tutorial/eas/ios-multi-variants-installed.png"
  style={{ maxWidth: 250 }}
/>

</Step>

## Summary

In this chapter, we:

- Configured and created internal distribution builds for both Android and iOS.
- Used ad hoc provisioning profiles for registering multiple iOS devices.
- Installed preview builds using shareable links.
- Learned that development and preview builds of the same app can exist simultaneously on one device using multiple variants.

<ProgressTracker currentChapterIndex={5} name="EAS_TUTORIAL" />

## Next step

<BoxLink
  title="Manage different app versions"
  Icon={BookOpen02Icon}
  description="In the next chapter, learn about developer-facing and user-facing app versions and how to manage them automatically."
  href="/tutorial/eas/manage-app-versions/"
/>
