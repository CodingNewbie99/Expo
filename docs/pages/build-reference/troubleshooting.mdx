---
title: Troubleshoot build errors and crashes
description: A reference for troubleshooting build errors and crashes when using EAS Build.
---

import { Collapsible } from '~/ui/components/Collapsible';
import { Terminal } from '~/ui/components/Snippet';
import { A } from '~/ui/components/Text';

> This document is under active development; the topic it covers is expansive and finding the right way to explain how to troubleshoot issues will take some trial and error. Your suggestions for improvements are welcome as pull requests.

When something goes wrong, it probably will go wrong in one of two following ways:

1. Your build will fail.
2. The build will succeed but encounter a runtime error, for example, it crashes or hangs when you run it.

All standard advice around [narrowing down the source of an error](https://expo.fyi/manual-debugging) applies here; this document provides information that may be useful on top of your typical troubleshooting processes and techniques. Troubleshooting is an art, and you might need to think creatively.

## Find the related error logs

Before you go further, you need to be sure that you have located the error message and read it. How you do this will be different depending on whether you're investigating a build failure or runtime error.

### Runtime errors

Common questions that fall under this category are: "my app runs well locally by crashes immediately when I run a build" or "my app works in Expo Go but hangs on the splash screen in my build". When your app builds successfully but crashes or hangs when you run it, this is considered a runtime error.

Refer to the ["Production errors" section of the debugging guide](/debugging/runtime-issues/#production-errors) to learn how to locate logs when your release builds are crashing at runtime.

If can't find any useful information through this approch, try [narrowing down the source of the crash step by step](https://expo.fyi/manual-debugging).

### Build errors

Go to your build details page (find it on the [build dashboard](https://expo.dev/accounts/[account]/projects/[project]/builds) if you don't have it open already) and expand any failed build phases by clicking on them. Often, the earliest phase with errors will contain the most useful information and any subsequent failed phase will have cascaded from the first.

Regardless of the phase, **it's common to see log entries prefixed with `[stderr]`, but keep in mind that this doesn't necessarily mean those logs point to errors**; it's common for CLI tools to use [stderr](<https://en.wikipedia.org/wiki/Standard_streams#Standard_error_(stderr)>) to output warnings and other diagnostics.

For example, you might see something like this on your Android builds:

<Terminal
  cmd={[
    `[stderr] Note: /build/workingdir/build/app/node_modules/@react-native-async-storage/async-storage/android/src/main/java/com/reactnativecommunity/asyncstorage/AsyncStorageModule.java uses or overrides a deprecated API.`,
    `[stderr] Note: Recompile with -Xlint:deprecation for details.`,
  ]}
/>

While you may or may not be interested in following up on that warning, it is not the cause of your failed build. So how do you know which logs are truly responsible? If you are building a bare project, you will already be good at this. If you are building a [managed project](/archive/managed-vs-bare/), it may be tricky because you don't directly interact with the native code, only write JavaScript.

A good path forward is to **determine if the build failed due to a native or JavaScript error**. When your build fails due to a JavaScript build error, you will usually see something like this:

<Terminal
  cmd={[
    `❌ Metro encountered an error:`,
    `Unable to resolve module ./src/Routes from /Users/expo/workingdir/build/App.js`,
  ]}
/>

This particular error means that the app is importing **./src/Routes** and it is not found. The cause could be that the filename case is different in Git than the developer's filesystem (for example, **routes.js** in Git instead of **Routes.js**), or maybe the project has a build step and it wasn't set up to run on EAS Build. In this case, it turns out that in this case **./src/Routes** was intended to import **./src/Routes/index.js**, but that path was accidentally excluded in the developer's **.gitignore**.

It's important to note that with iOS builds the build details page only displays an abridged version of the logs because the full output from `xcodebuild` can be in the order of 10MB. Sometimes it's necessary to open the full Xcode logs to find the information that you need; for example, if the JavaScript build failed but you don't see any useful information on the build details page. To open the full Xcode logs, scroll to the bottom of the build details page when the build has been completed and either click to view or download them.

{/* TODO: native and js build phases should be separate in eas build logs, this is too much work for people to figure out */}

If you are working on a managed app and the build error is a native error rather than a JavaScript error, this is likely due to a [config plugin](/config-plugins/introduction/) or a dependency in your project. Keep an eye out in the logs for any new packages that you have added since your previous successful build. Run `npx expo-doctor` to determine that the versions of Expo SDK dependencies in your project are compatible with your Expo SDK version.

Armed with your error logs, you can often start to fix your build or search the [forums](https://chat.expo.dev/) and GitHub issues for related packages to dig deeper. Some common sources of problems are listed below.

<Collapsible summary="Are you using a monorepo?">

Monorepos are incredibly useful but they do introduce their own set of problems. It's necessary to upload the entire monorepo to the EAS Build builders, set it up, and run the build.

EAS Build is more like a typical CI service in that we need the source code, rather than a compiled JavaScript bundle and manifest. EAS Build has first-class support for Yarn workspaces, and [your success may vary when using other monorepo tools](/build-reference/limitations).

For more information, see [Working with monorepos](/guides/monorepos).

</Collapsible>

<Collapsible summary="Out-of-memory (OOM) errors">

If your build fails with "Gradle build daemon disappeared unexpectedly (it may have been killed or may have crashed)" in your Gradle logs, this may be because the Node process responsible for bundling your app JavaScript was killed.

This can often be a sign that your app bundle is extremely large, which will make your overall app binary larger and lead to slow boot up times, especially on low-end Android devices. Sometimes the error can occur when large text files are treated as source code, for example, if you have a JavaScript file that contains a string of 1MB+ of HTML to load into a webview, or a similarly sized JSON file.

To determine how large your bundle is and to see a breakdown of where the size comes from, use [react-native-bundle-visualizer](https://github.com/IjzerenHein/react-native-bundle-visualizer).

To increase memory limits on your EAS Build builders, you can use [`large` resource class](/eas/json/#resourceclass) in your **eas.json**. See [Android-specific resource class](/build-reference/infrastructure/#android-build-server-configurations) and [iOS-specific resource class](/build-reference/infrastructure/#ios-build-server-configurations) for more information.

</Collapsible>

<Collapsible summary="Necessary files in .gitignore">

EAS Build does not have access to any files or directories listed in your project's **.gitignore** file. When you run `eas build`, your project files are uploaded to Expo's build servers; however, any files or directories in your **.gitignore** are **not** uploaded. This is intentional since files in the **.gitignore** may contain sensitive information, such as API keys or other secrets, that should not be sent to external servers, including Expo's build servers.

If one of your files imports a file listed in your **.gitignore**, the build will fail and return an error like this:

<Terminal
  cmd={[
   `❌ Metro encountered an error:`,
    `Unable to resolve module ../src/aws-exports from /Users/expo/workingdir/build/App.js`,
    ``,
    `None of these files exist:`,
  ]}
/>

In this case, as EAS Build was processing the project's code, one JavaScript file tried to import **../src/aws-exports**.
```js
import awsconfig from '../src/aws-exports';
```

However, it was not found because it was in the **.gitignore**.
```sh
aws-exports.js
```

There are a number of different ways to solve this error, but your specific solution will depend on the needs of your project and organization.

**Make sure your project actually needs the import statement referencing the gitignored file.** Before trying other solutions, if you are not certain the import statement is needed for your project to function, remove the import statement and test your project. If your project functions as expected, that import statement may have been outdated or unnecessary.

**Remove file(s) from .gitignore.** The easiest way to fix this build error is to remove any files or directories Metro was unable to resolve from your **.gitignore**. However, this poses a security risk since any sensitive information included in these files will now be available in your project's source code and Git commit history.

**Encode the file with `base64`, save that string as secrets, and create the file in an EAS Build hook.** See ["How can I upload files to EAS Build if they are gitignored?"](https://github.com/expo/fyi/blob/main/eas-build-archive.md#how-can-i-upload-files-to-eas-build-if-they-are-gitignored) for more information.

**Refactor your source code to not import sensitive files client-side.** If your project uses auto-generated code from a third-party backend services provider, such as AWS, and the provider automatically listed files in your **.gitignore**, those files probably contain sensitive information you should not include in client-side code. It may take considerable effort to refactor your project to use server-side code and no longer be dependent on the gitignored files, but it is the most secure long-term solution.

</Collapsible>

#### Package dependency errors

> **warning** This section is written for projects that use npm as their package manager and have configured the `eas build` command to use `npm install`. If your project uses a different package manager, you may have to adjust some of the commands. Additionally, the **package.json** examples omit much of the original code and should not be copied.

When you run `eas build`, your project's **node_modules/** directory is **not** uploaded to Expo's build servers. During the build process, the build server runs a fresh `npm install` based on your project's **package.json** and **package-lock.json** files, and if this results in an error, your build will fail. The easiest way to prevent this issue is to run `npm ci` and fix any errors that appear before running `eas build`. Sometimes, just running `npm ci` is enough to fix the build error.

<Terminal
  cmdCopy="npm ci"
  cmd={[
    '# Clean install dependencies',
    '$ npm ci',
  ]}
/>

If your project is a team project, the risk of package dependency errors increases since team members may install new packages and commit the package references to Git before you can verify a fresh npm installation will work. In team projects, closely monitor **package.json** for changes.

Before running `eas build`, you should make sure your project actually uses all the packages in **package.json**. Sometimes, you or a team member may install a package, test it, decide to not use it, and forget to remove the package from **package.json**. Even if this package is not used anywhere in the project, it can still cause `eas build` to fail.

- Search your project files for packages that are never referenced in an `import` statement. Remove these packages from **package.json**, run `npm ci`, and thoroughly test your project to make sure everything still works.

- Search your project files for `import` statements that are not utilized anywhere within the file's code. Comment out these import statements and thoroughly test your project. If everything works, delete the unused import statements and remove the package from **package.json**.

Many package dependency errors are outside Expo's control and must be resolved locally by modifying your project's **package.json** before running `eas build`. Some package dependency errors are listed below.


<Collapsible summary="404 Not Found">

If npm is unable to download a package listed in your project's **package.json** or in a dependency's **package.json**, the build may fail and result in an error like this:

<Terminal
  cmd={[
    'npm ERR! code E404',
    'npm ERR! 404 Not Found - GET http://10.94.183.70:4873/-/-/ahdudjsi-0.0.1.tgz - File not found',
    'npm ERR! 404 \'-@http://10.94.183.70:4873/-/-/ahdudjsi-0.0.1.tgz\' is not in this registry.',
    'npm ERR! 404',
    'npm ERR! 404 Note that you can also install from a',
    'npm ERR! 404 tarball, folder, http url, or git url.',
  ]}
/>

This error means that one of your project’s dependencies is invalid. This can be caused by a typo in a package name in your project's **package.json**. Try going through the dependencies section of your **package.json** and running `npm view package-name` to see if any package is Not Found. If you find a Not Found package, remove it from package.json.

```js
  "dependencies": {
    "ahdudjsi": "0.0.1",
    "expo": "^49.0.9",
    "react-native":"0.72.6"
  }
```
In this example, "ahdudjsi" is not a valid npm package. Running `npm view ahdudjsi` will result in a Not Found error, so the line `"ahdudjsi": "0.0.1",` must be removed.

> **info** Sometimes 404 Not Found package errors are inconsistent. In the upcoming example, an untrustworthy package allowed `eas build` to succeed the first few builds but then caused `eas build` to fail in later builds.

```js
  "dependencies": {
    "-": "0.0.1",
    "expo": "^49.0.9",
    "react-native":"0.72.6"
  }
```
In this example, "-" is a valid name for an npm package, but analyzing its source code reveals it does not serve any purpose. "-" was probably installed accidentally through a command such as `npm install - expo`, which installs two packages: "-" and "expo". Because "-" was installed accidentally and is not required by the project, the line `"-": "0.0.1",` must be removed.

</Collapsible>

<Collapsible summary="Conflicting peer dependency">

If two or more packages require different, incompatible versions of a certain package, `npm install` will result in a conflicting peer dependency error like this:

<Terminal
  cmd={[
    'npm ERR!',
    'code ERESOLVE',
    'npm ERR! ERESOLVE could not resolve',
    'npm ERR!',
    'npm ERR! While resolving: react-native-orientation-locker@1.5.0',
    '# This line means the package "react-native" is version "0.72.5",',
    '# as defined in package.json.',
    'npm ERR! Found: react-native@0.72.5',
    'npm ERR! node_modules/react-native',
    'npm ERR!   react-native@"0.72.5" from the root project',
    'npm ERR!   peer react-native@">= 0.63.4" from @aws-amplify/ui-react-native@1.2.28',
    'npm ERR!   node_modules/@aws-amplify/ui-react-native',
    'npm ERR!     @aws-amplify/ui-react-native@"^1.2.27" from the root project',
    'npm ERR!   22 more (@react-native-async-storage/async-storage, ...)',
    'npm ERR!',
    'npm ERR! Could not resolve dependency:',
    'npm ERR! peer react-native-windows@">=0.63.3" from react-native-orientation-locker@1.5.0',
    'npm ERR! node_modules/react-native-orientation-locker',
    'npm ERR!   react-native-orientation-locker@"^1.5.0" from the root project',
    'npm ERR!',
    'npm ERR! Conflicting peer dependency: react-native@0.72.7',
    'npm ERR! node_modules/react-native',
    '# This line means the package "react-native-windows" is version "0.72.19"',
    '# and requires "react-native" version "0.72.6" or higher.',
    '# This is a problem since "react-native" version "0.72.5" is below "0.72.6".',
    'npm ERR!   peer react-native@"^0.72.6" from react-native-windows@0.72.19',
    'npm ERR!   node_modules/react-native-windows',
    'npm ERR!     peer react-native-windows@">=0.63.3" from react-native-orientation-locker@1.5.0',
    'npm ERR!     node_modules/react-native-orientation-locker',
    'npm ERR!       react-native-orientation-locker@"^1.5.0" from the root project',
    'npm ERR!',
    '# Here, npm suggests running npm install --force or',
    '# npm install --legacy-peer-deps, but this is not the best solution.',
    'npm ERR! Fix the upstream dependency conflict, or retry',
    'npm ERR! this command with --force, or --legacy-peer-deps',
    'npm ERR! to accept an incorrect (and potentially broken) dependency resolution.',
  ]}
/>

In this example, the peer dependency error can be fixed by specifying `"react-native": "0.72.6"` in **package.json**.

Conflicting peer dependency errors should be solved by analyzing the error message and adjusting version numbers in **package.json** as needed. After adjusting version numbers, run `npm ci` to see if the error has been solved.

> **warning** A common way to dodge conflicting peer dependency errors is to run `npm install --force` or `npm install --legacy-peer-deps`. You may be able to run these commands and fix the error locally, but `eas build` will use `npm install` by default to install the dependencies on Expo's build server.

You can override the default `eas build` build command to use `legacy-peer-deps` by creating a file named **.npmrc** in your project's root directory and adding the line `legacy-peer-deps=true` in the file's contents. However, this is a workaround and the long-term solution is to manually adjust version numbers until the error is resolved.

</Collapsible>

<Collapsible summary="Other package errors">

There are many different package-related errors that can occur at different stages of the build process. If you encounter an unfamiliar error, the general troubleshooting strategy is as follows:

1. Identify the package name that caused the error.
2. Determine if your project actually needs the package. If your project does not, remove any references to the package from your project files and **package.json**.
3. If your project needs the package, try updating the package to the latest version. To find the latest version of a package, run `npm view package-name`, go to the "dist-tags" section in the terminal output, and find the version number after "latest". In your **package.json**, set this version number for the package.
4. If updating the version doesn't fix the error, your remaining options are to search the Internet for advice or refactor your project to not use the specific package.

</Collapsible>

## Verify that your JavaScript bundles locally

When a build fails with `Task :app:bundleReleaseJsAndAssets FAILED` (Android) or `Metro encountered an error` (iOS), it means Metro bundler was unable to bundle the app's JavaScript code while trying to embed it in your app's binary. This error message is usually followed by a syntax error or other details about why bundling failed. Unfortunately, a standard React Native project is configured to perform this step late in the Gradle/Xcode build step, meaning it can take a while to see this error.

You can build the production bundle locally by running `npx expo export` to bypass all of the other build steps so you can see this error much more quickly. Run this command repeatedly, resolving any syntax errors or other issues uncovered until the bundle builds successfully. Then try your EAS Build again.

## Verify that your project builds and runs locally

If the logs weren't enough to immediately help you understand and fix the root cause, it's time to try to reproduce the issue locally. If your project builds and runs locally in release mode then it will also build on EAS Build, provided that the following are all true:

- Relevant [Build tool versions](/build/eas-json#configuring-your-build-tools) (for example, Xcode, Node.js, npm, Yarn) are the same in both environments.
- Relevant [environment variables](/build-reference/variables) are the same in both environments.
- The [archive](https://expo.fyi/eas-build-archive) that is uploaded to EAS Build includes the same relevant source files.

You can verify that your project builds on your local machine with the `npx expo run:android` and `npx expo run:ios` commands, with variant/configuration flags set to release to most faithfully reproduce what executes on EAS Build. For more information, see [Android build process](/build-reference/android-builds) and [iOS build process](/build-reference/ios-builds).

<Terminal
  cmd={[
    '# Locally compile and run the Android app in release mode',
    '$ npx expo run:android --variant release',
    '',
    '# Locally compile and run the iOS app in release mode',
    '$ npx expo run:ios --configuration Release',
  ]}
/>

> If use [CNG](/workflow/continuous-native-generation.mdx), these commands will run `npx expo prebuild` to generate native projects to compile them.You likely want to [clean up the changes](https://expo.fyi/prebuild-cleanup) once you are done troubleshooting, unless you want to start managing these projects directly instead of generating them on demand.
>
> <br />
> You can alternatively run a local build with `eas build --local` &mdash; this command will run a series
> of steps that is as close as it can be to what runs remotely on the hosted EAS Build service. It will
> copy your project to a temporary directory and make any necessary changes there. [Learn how to set
> this up and use it for debugging](/build-reference/local-builds.mdx#using-local-builds-for-debugging).

If your native toolchains are installed correctly and you are unable to build and run your project in release mode on your local machine, it will not build on EAS Build. Fix the issues locally, then try again on EAS Build. The other advice in this doc may be useful to help you resolve the issue locally, but often this requires some knowledge of native tooling or judicious application of Google, Stack Overflow, and GitHub Issues.

<Collapsible summary="Don't have Xcode and Android Studio set up on your machine?">

**If you do not have native toolchains installed locally**, for example, because you do not have an Apple computer and therefore cannot build an iOS app on your machine, it can be trickier to get to the bottom of build errors. The feedback loop of making small changes locally and then seeing the result on EAS Build is slower than doing the same steps locally because the EAS Build builder must set up its environment, download your project, and install dependencies before starting the build.

If you are willing and able to set up the appropriate native tools, then refer to the [React Native environment setup guide](https://reactnative.dev/docs/environment-setup).

</Collapsible>

<Collapsible summary="My app builds locally, but not on EAS Build">

By default, EAS Build follows a relatively straightforward process for building your app for ([Android](/build-reference/android-builds) or [iOS](/build-reference/ios-builds)). If `npx expo run:android --variant release` and `npx expo run:ios --configuration Release` work locally, but your builds fail, then it's time to narrow down what configuration exists on your machine that hasn't been set up for your project on EAS Build yet.

- Do a fresh `git clone` of your project to a new directory and get it running, ideally on a different machine. Pay attention to each of the steps that are needed and verify that they are also configured for EAS Build.
- Check that your [environment variables](/guides/environment-variables) are properly configured.
- Verify that versions of Node.js, npm, Yarn, Xcode, Java, and other tools are the same in both environments.
- Ensure that the [archive you are uploading to EAS Build](https://expo.fyi/eas-build-archive) includes the same relevant source files.

</Collapsible>

<Collapsible summary="Why does my production app not match my development app?">

You can test how the JS part of your app will run in production by starting it with [`npx expo start --no-dev`](/workflow/development-mode/#production-mode). This tells the bundler to minify JavaScript before serving it, most notably stripping code protected by the `__DEV__` boolean. This will remove most of the logging, HMR, Fast Refresh functionality, and make debugging a bit harder, but you can iterate on the production bundle faster this way.

</Collapsible>

## Still having trouble?

This guide is far from being comprehensive, and depending on your level of experience you might still be struggling to get your app working.

If you have followed the advice here, you're now in a good position to describe your issue to other developers and get some help.

### How to ask a good question

Join us on <A href="https://chat.expo.dev/" shouldLeakReferrer>Discord and Forums</A> to ask for help from the community and the Expo team. The Expo team does our best to respond to high quality and well-articulated questions and issues, but responses are not guaranteed unless you are signed up for a [support plan](https://expo.dev/support-terms#target-response-time-guidelines-for-subscriptions). To ensure that an Expo team member sees your question, you can file a ticket at [expo.dev/contact](https://expo.dev/contact).

When you ask for troubleshooting help, be sure to share the following information:

- **A link to your build page**. This can only be accessed by your team or Expo employees. If you'd like to share it more publicly, take a screenshot. If you'd like to share it more privately, send an email to secure@expo.dev and mention that in your help request on chat or forums. If you are performing this build locally with `eas build --local`, you may omit this, but please indicate this fact.
- **Error logs**. Anything that you suspect may be related to your build or runtime error. If you can't provide this, please explain why not.
- **Minimal reproducible example or a link to your repository**. The quickest way to get a solution to your problem is to ensure that other developers can reproduce it. If you have ever worked on a team, you know this from experience. In many cases, if you can't provide a reproducible example then it may not be possible to help you, and at best the back-and-forth process of asking and answering questions will be an inefficient use of time. Learn more about how to create a reproducible example in the [manual debugging guide](https://expo.fyi/manual-debugging) and Stack Overflow's [Minimal Viable Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) guide.

Try to be clear, precise, and helpful. General guidance provided by Stack Overflow's [How to ask a good question](https://stackoverflow.com/help/how-to-ask) guide applies.
