---
title: Metro bundler
sidebar_title: Bundle with Metro
maxHeadingDepth: 4
description: Learn about different Metro bundler configurations that can be customized.
---

import { Terminal } from '~/ui/components/Snippet';
import { BoxLink } from '~/ui/components/BoxLink';
import { BookOpen02Icon } from '@expo/styleguide-icons';

Expo CLI uses Metro during [`npx expo start`](/more/expo-cli/#develop) and [`npx expo export`](/more/expo-cli/#exporting) to bundle your JavaScript code and assets. Metro is built and optimized for React Native and used for large-scale applications such as Facebook and Instagram.

## Customizing

You can customize the Metro bundler by creating a **metro.config.js** file at the root of your project. This file should export a [Metro configuration](https://facebook.github.io/metro/docs/configuration) that extends [`expo/metro-config`](https://github.com/expo/expo/tree/main/packages/@expo/metro-config). Import `expo/metro-config` instead of `@expo/metro-config` to ensure version consistency.

Run the following command to generate the template file:

<Terminal cmd={['$ npx expo customize metro.config.js']} />

The **metro.config.js** file looks as below:

```js metro.config.js
const { getDefaultConfig } = require('expo/metro-config');

const config = getDefaultConfig(__dirname);

module.exports = config;
```

<BoxLink
  title="API Reference: metro.config.js"
  description="A reference of available configurations with Metro and expo/metro-config"
  href="/versions/latest/config/metro/"
  Icon={BookOpen02Icon}
/>

<BoxLink
  title={`"Configuring Metro" â€” an API reference on the Metro Bundler documentation`}
  description="Learn about all of the available options. Refers to the latest released version of Metro."
  href="https://facebook.github.io/metro/docs/configuration"
  Icon={BookOpen02Icon}
/>

## Assets

Metro resolves files as either source code or assets. Source code is JavaScript, TypeScript, JSON, and other files used by your application. [Assets](/guides/assets) are images, fonts, and other files that should not be transformed by Metro. To accommodate large-scale codebases, Metro requires all extensions for both source code and assets to be explicitly defined before starting the bundler. This is done by adding the `resolver.sourceExts` and `resolver.assetExts` options to the Metro configuration. By default, the following extensions are included:

- [`resolver.assetExts`](https://github.com/facebook/metro/blob/7028b7f51074f9ceef22258a8643d0f90de2388b/packages/metro-config/src/defaults/defaults.js#L15)
- [`resolver.sourceExts`](https://github.com/facebook/metro/blob/7028b7f51074f9ceef22258a8643d0f90de2388b/packages/metro-config/src/defaults/defaults.js#L53)

### Adding more file extensions to `assetExts`

The most common customization is to include extra asset extensions to Metro.

In the **metro.config.js** file, add the file extension (without a leading `.`) to `resolver.assetExts` array:

```js metro.config.js
const { getDefaultConfig } = require('expo/metro-config');

const config = getDefaultConfig(__dirname);

config.resolver.assetExts.push(
  // Adds support for `.db` files for SQLite databases
  'db'
);

module.exports = config;
```

## Transformer

If you want to modify the `transformer` property, you should ensure that you do not clobber the existing config provided by default by `expo/metro-config`.

```js metro.config.js
const { getDefaultConfig } = require('expo/metro-config');

const config = getDefaultConfig(__dirname);

// Warning: do not do this! You will lose the default transformer configuration.
// config.transformer = {
//   babelTransformerPath: require.resolve("react-native-svg-transformer"),
// };

config.transformer = {
  ...config.transformer,
  // Your customization here.
}

module.exports = config;
```

Refer to the [ExpoMetroConfig.ts](https://github.com/expo/expo/blob/d54c290e384d9a95b98445f77f82149ce82603f3/packages/%40expo/metro-config/src/ExpoMetroConfig.ts#L245-L272) source code before overwriting any values, to ensure that you understand what you are changing. The following links provide information on how to modify specific aspects of the transformer.

<BoxLink
  title="Extending the Babel transformer"
  description="Learn about how to extend the Babel transformer, commonly used for inlining SVGs."
  href="/versions/latest/config/metro/#extending-the-babel-transformer"
  Icon={BookOpen02Icon}
/>

<BoxLink
  title="Extending the Babel transformer"
  description="Learn about how to extend the Babel transformer, commonly used for inlining SVGs."
  href="/versions/latest/config/metro/#extending-the-babel-transformer"
  Icon={BookOpen02Icon}
/>

## Bundle splitting

From SDK 50, Expo CLI automatically splits bundles based on async imports (web-only).

This technique can be used with Expo Router to automatically split the bundle based on route files in the **app/** directory. It will only load the the code required for the current route, and defer loading additional JavaScript until the user navigates to different pages. See [Async Routes](/router/reference/async-routes) for more information.

## Tree shaking

<BoxLink
  title="Tree shaking"
  description="Learn about how Expo CLI optimizes production JavaScript bundles."
  href="/guides/tree-shaking/"
  Icon={BookOpen02Icon}
/>

## Minification

<BoxLink
  title="Minifying JavaScript"
  description="Learn about customizing the JavaScript minification process in Expo CLI with Metro bundler."
  href="/guides/minify/"
  Icon={BookOpen02Icon}
/>

## Web support

Since Expo SDK 46, Expo CLI has support for bundling websites using Metro. This is the same bundler used for native apps, and it is designed to be universal across platforms. It is the recommended bundler for web projects in Expo SDK 50 and greater.

### Expo webpack versus Expo Metro

If you previously wrote your website using the deprecated `@expo/webpack-adapter`, see the [migration guide](/router/migrate/from-expo-webpack) and [comparison chart](/router/migrate/from-expo-webpack#expo-cli).

### Adding Web support to Metro

To enable Metro web support, make sure your project is using Expo SDK 46 or newer. Then modify your [app config](/workflow/configuration) to enable the feature using the `expo.web.bundler` field:

```json app.json
{
  "expo": {
    "web": {
      "bundler": "metro"
    }
  }
}
```

#### Development

To start the development server run the following command:

<Terminal cmd={['$ npx expo start --web']} />

Alternatively, press <kbd>W</kbd> in the Expo CLI terminal UI.

#### Static files

Expo's Metro implementation supports hosting static files from the dev server by putting them in the root **public/** directory. It is similar to many other web frameworks.

When exporting with `npx expo export`, the contents of the **public** directory are copied into the **dist/** directory. It means your app can expect to fetch these assets relative to the host URL. The most common example of this is the **public/favicon.ico** which is used by websites to render the tab icon.

You can overwrite the default **index.html** in Metro web by creating a **public/index.html** file in your project.

In the future, this will work universally across platforms with EAS Update hosting. Currently, the feature is web-only based on the static host used for the native app, for example, the legacy Expo service updates do not support this feature.

## TypeScript

> Available in SDK 49 and higher.

Expo's Metro config supports the `compilerOptions.paths` and `compilerOptions.baseUrl` fields in the project's **tsconfig.json** (or **jsconfig.json**) file. This enables absolute imports and aliases in the project. See [TypeScript](/guides/typescript) guide for more information.

This feature requires additional setup in bare projects. See the [Metro setup guide](/versions/latest/config/metro#bare-workflow-setup) for more information.

## CSS

<BoxLink
  title="Metro web CSS guide"
  description="Learn how to use CSS in websites that are bundled with Expo CLI and Metro bundler."
  href="/versions/latest/config/metro#css"
  Icon={BookOpen02Icon}
/>
