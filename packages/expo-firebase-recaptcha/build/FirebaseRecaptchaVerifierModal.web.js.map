{"version":3,"file":"FirebaseRecaptchaVerifierModal.web.js","sourceRoot":"","sources":["../src/FirebaseRecaptchaVerifierModal.web.tsx"],"names":[],"mappings":"AAAA,OAAO,QAAQ,MAAM,qBAAqB,CAAC;AAC3C,OAAO,sBAAsB,CAAC;AAC9B,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAY/B,MAAM,8BAA+B,SAAQ,KAAK,CAAC,SAAgB;IACzD,QAAQ,GAA2C,IAAI,CAAC;IAExD,MAAM,GAAG,CAAC,GAAQ,EAAE,EAAE;QAC5B,IAAI,GAAG,EAAE;YACP,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,MAAM;gBAAE,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;YAE9E,IAAI,IAAI,CAAC,KAAK,CAAC,iCAAiC,KAAK,SAAS,EAAE;gBAC9D,QAAQ,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC,iCAAiC;oBACxD,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,iCAAiC,CAAC;aAClD;YACD,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE;gBAC3B,QAAQ,CAAC,IAAI,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;aACxD;YACD,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE;gBACvD,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ;gBACtE,2BAA2B;aAC5B,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACtB;QACD,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACvB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;SAC7C;IACH,CAAC,CAAC;IAEF,qBAAqB,CAAC,SAAgB;QACpC,OAAO,CACL,IAAI,CAAC,KAAK,CAAC,iCAAiC;YAC5C,SAAS,CAAC,iCAAiC;YAC3C,IAAI,CAAC,KAAK,CAAC,4BAA4B,KAAK,SAAS,CAAC,4BAA4B;YAClF,IAAI,CAAC,KAAK,CAAC,YAAY,KAAK,SAAS,CAAC,YAAY,CACnD,CAAC;IACJ,CAAC;IAED,kBAAkB,CAAC,SAAgB;QACjC,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,KAAK,SAAS,CAAC,QAAQ,EAAE;YAC9C,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACvB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;aAC7C;SACF;IACH,CAAC;IAED,MAAM;QACJ,MAAM,EAAE,4BAA4B,EAAE,iCAAiC,EAAE,YAAY,EAAE,GACrF,IAAI,CAAC,KAAK,CAAC;QACb,OAAO,CACL,6BACE,KAAK,EAAE,MAAM,CAAC,SAAS,EACvB,GAAG,EAAE,GAAG,4BAA4B,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,IAAI,iCAAiC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAChH,IAAI,YAAY,IAAI,EAAE,EAAE,EAC1B,EAAE,EAAC,qBAAqB,EACxB,GAAG,EAAE,IAAI,CAAC,MAAM,EAChB,uBAAuB,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,GACvC,CACH,CAAC;IACJ,CAAC;CACF;AAED,eAAe,KAAK,CAAC,UAAU,CAAC,CAAC,KAA8B,EAAE,GAAQ,EAAE,EAAE,CAAC,CAC5E,oBAAC,8BAA8B,OAAK,KAAK,EAAE,QAAQ,EAAE,GAAG,GAAI,CAC7D,CAAC,CAAC;AAEH,MAAM,MAAM,GAAG;IACb,2DAA2D;IAC3D,SAAS,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;CAC5B,CAAC","sourcesContent":["import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport * as React from 'react';\n\nimport { FirebaseAuthApplicationVerifier } from './FirebaseRecaptcha.types';\n\ninterface Props {\n  attemptInvisibleVerification?: boolean;\n  appVerificationDisabledForTesting?: boolean;\n  languageCode?: string;\n  innerRef: React.MutableRefObject<FirebaseAuthApplicationVerifier | null>;\n  firebaseConfig: any;\n}\n\nclass FirebaseRecaptchaVerifierModal extends React.Component<Props> {\n  private verifier: FirebaseAuthApplicationVerifier | null = null;\n\n  private setRef = (ref: any) => {\n    if (ref) {\n      if (!firebase.apps?.length) firebase.initializeApp(this.props.firebaseConfig);\n\n      if (this.props.appVerificationDisabledForTesting !== undefined) {\n        firebase.auth().settings.appVerificationDisabledForTesting =\n          !!this.props.appVerificationDisabledForTesting;\n      }\n      if (this.props.languageCode) {\n        firebase.auth().languageCode = this.props.languageCode;\n      }\n      this.verifier = new firebase.auth.RecaptchaVerifier(ref, {\n        size: this.props.attemptInvisibleVerification ? 'invisible' : 'normal',\n        // callback: response => {}\n      });\n    } else {\n      this.verifier = null;\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef.current = this.verifier;\n    }\n  };\n\n  shouldComponentUpdate(nextProps: Props) {\n    return (\n      this.props.appVerificationDisabledForTesting !==\n      nextProps.appVerificationDisabledForTesting ||\n      this.props.attemptInvisibleVerification !== nextProps.attemptInvisibleVerification ||\n      this.props.languageCode !== nextProps.languageCode\n    );\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.innerRef !== prevProps.innerRef) {\n      if (this.props.innerRef) {\n        this.props.innerRef.current = this.verifier;\n      }\n    }\n  }\n\n  render() {\n    const { attemptInvisibleVerification, appVerificationDisabledForTesting, languageCode } =\n      this.props;\n    return (\n      <div\n        style={styles.container}\n        key={`${attemptInvisibleVerification ? 'invisible' : 'visible'}-${appVerificationDisabledForTesting ? 'testing' : 'regular'\n          }-${languageCode ?? ''}`}\n        id=\"recaptcha-container\"\n        ref={this.setRef}\n        dangerouslySetInnerHTML={{ __html: '' }}\n      />\n    );\n  }\n}\n\nexport default React.forwardRef((props: Omit<Props, 'innerRef'>, ref: any) => (\n  <FirebaseRecaptchaVerifierModal {...props} innerRef={ref} />\n));\n\nconst styles = {\n  // Ensure the reCAPTCHA badge is in front or other elements\n  container: { zIndex: 1000 },\n};\n"]}