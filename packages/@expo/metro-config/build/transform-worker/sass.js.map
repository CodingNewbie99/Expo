{"version":3,"file":"sass.js","names":["_resolveFrom","data","_interopRequireDefault","require","obj","__esModule","default","matchSass","filename","endsWith","sassInstance","getSassInstance","projectRoot","sassPath","resolveFrom","silent","Error","compileSass","src","options","sass","result","compileString","css","map","sourceMap"],"sources":["../../src/transform-worker/sass.ts"],"sourcesContent":["import resolveFrom from 'resolve-from';\n\nexport function matchSass(filename: string): import('sass').Syntax | null {\n  if (filename.endsWith('.sass')) {\n    return 'indented';\n  } else if (filename.endsWith('.scss')) {\n    return 'scss';\n  }\n  return null;\n}\n\nlet sassInstance: typeof import('sass') | null = null;\n\nfunction getSassInstance(projectRoot: string, { filename }: { filename: string }) {\n  if (!sassInstance) {\n    const sassPath = resolveFrom.silent(projectRoot, 'sass');\n\n    if (!sassPath) {\n      throw new Error(\n        `Cannot find module 'sass' from '${projectRoot}'. Make sure it's installed. Parsing: ${filename}`\n      );\n    }\n\n    sassInstance = require(sassPath) as typeof import('sass');\n  }\n\n  return sassInstance;\n}\n\nexport function compileSass(\n  projectRoot: string,\n  { filename, src }: { filename: string; src: string },\n  options?: Partial<import('sass').StringOptions<'sync'>>\n) {\n  const sass = getSassInstance(projectRoot, { filename });\n  const result = sass.compileString(src, options);\n  return { src: result.css, map: result.sourceMap };\n}\n"],"mappings":";;;;;;;AAAA,SAAAA,aAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,YAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAAuC,SAAAC,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhC,SAASG,SAASA,CAACC,QAAgB,EAAgC;EACxE,IAAIA,QAAQ,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;IAC9B,OAAO,UAAU;EACnB,CAAC,MAAM,IAAID,QAAQ,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;IACrC,OAAO,MAAM;EACf;EACA,OAAO,IAAI;AACb;AAEA,IAAIC,YAA0C,GAAG,IAAI;AAErD,SAASC,eAAeA,CAACC,WAAmB,EAAE;EAAEJ;AAA+B,CAAC,EAAE;EAChF,IAAI,CAACE,YAAY,EAAE;IACjB,MAAMG,QAAQ,GAAGC,sBAAW,CAACC,MAAM,CAACH,WAAW,EAAE,MAAM,CAAC;IAExD,IAAI,CAACC,QAAQ,EAAE;MACb,MAAM,IAAIG,KAAK,CACZ,mCAAkCJ,WAAY,yCAAwCJ,QAAS,EAAC,CAClG;IACH;IAEAE,YAAY,GAAGP,OAAO,CAACU,QAAQ,CAA0B;EAC3D;EAEA,OAAOH,YAAY;AACrB;AAEO,SAASO,WAAWA,CACzBL,WAAmB,EACnB;EAAEJ,QAAQ;EAAEU;AAAuC,CAAC,EACpDC,OAAuD,EACvD;EACA,MAAMC,IAAI,GAAGT,eAAe,CAACC,WAAW,EAAE;IAAEJ;EAAS,CAAC,CAAC;EACvD,MAAMa,MAAM,GAAGD,IAAI,CAACE,aAAa,CAACJ,GAAG,EAAEC,OAAO,CAAC;EAC/C,OAAO;IAAED,GAAG,EAAEG,MAAM,CAACE,GAAG;IAAEC,GAAG,EAAEH,MAAM,CAACI;EAAU,CAAC;AACnD"}