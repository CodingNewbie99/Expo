{"version":3,"file":"getInfoPlistPath.js","names":["_Xcodeproj","data","require","_Target","getInfoPlistPathFromPbxproj","applePlatform","projectRootOrProject","targetName","buildConfiguration","project","resolvePathOrProject","xcBuildConfiguration","getXCBuildConfigurationFromPbxproj","sanitizeInfoPlistBuildProperty","buildSettings","INFOPLIST_FILE","exports","infoPlist","replace"],"sources":["../../../src/apple/utils/getInfoPlistPath.ts"],"sourcesContent":["import { XcodeProject } from 'xcode';\n\nimport { resolvePathOrProject } from './Xcodeproj';\nimport { getXCBuildConfigurationFromPbxproj } from '../Target';\n\n/**\n * Find the Info.plist path linked to a specific build configuration.\n *\n * @param projectRoot\n * @param param1\n * @returns\n */\nexport const getInfoPlistPathFromPbxproj =\n  (applePlatform: 'ios' | 'macos') =>\n  (\n    projectRootOrProject: string | XcodeProject,\n    {\n      targetName,\n      buildConfiguration = 'Release',\n    }: { targetName?: string; buildConfiguration?: string | 'Release' | 'Debug' } = {}\n  ): string | null => {\n    const project = resolvePathOrProject(applePlatform)(projectRootOrProject);\n    if (!project) {\n      return null;\n    }\n\n    const xcBuildConfiguration = getXCBuildConfigurationFromPbxproj(project, {\n      targetName,\n      buildConfiguration,\n    });\n    if (!xcBuildConfiguration) {\n      return null;\n    }\n    // The `INFOPLIST_FILE` is relative to the project folder, ex: app/Info.plist.\n    return sanitizeInfoPlistBuildProperty(xcBuildConfiguration.buildSettings.INFOPLIST_FILE);\n  };\n\nfunction sanitizeInfoPlistBuildProperty(infoPlist?: string): string | null {\n  return infoPlist?.replace(/\"/g, '').replace('$(SRCROOT)', '') ?? null;\n}\n"],"mappings":";;;;;;AAEA,SAAAA,WAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,UAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAE,QAAA;EAAA,MAAAF,IAAA,GAAAC,OAAA;EAAAC,OAAA,YAAAA,CAAA;IAAA,OAAAF,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMG,2BAA2B,GACrCC,aAA8B,IAC/B,CACEC,oBAA2C,EAC3C;EACEC,UAAU;EACVC,kBAAkB,GAAG;AACqD,CAAC,GAAG,CAAC,CAAC,KAChE;EAClB,MAAMC,OAAO,GAAG,IAAAC,iCAAoB,EAACL,aAAa,CAAC,CAACC,oBAAoB,CAAC;EACzE,IAAI,CAACG,OAAO,EAAE;IACZ,OAAO,IAAI;EACb;EAEA,MAAME,oBAAoB,GAAG,IAAAC,4CAAkC,EAACH,OAAO,EAAE;IACvEF,UAAU;IACVC;EACF,CAAC,CAAC;EACF,IAAI,CAACG,oBAAoB,EAAE;IACzB,OAAO,IAAI;EACb;EACA;EACA,OAAOE,8BAA8B,CAACF,oBAAoB,CAACG,aAAa,CAACC,cAAc,CAAC;AAC1F,CAAC;AAACC,OAAA,CAAAZ,2BAAA,GAAAA,2BAAA;AAEJ,SAASS,8BAA8BA,CAACI,SAAkB,EAAiB;EACzE,OAAOA,SAAS,EAAEC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,IAAI,IAAI;AACvE"}