{"version":3,"file":"Version.js","names":["_applePlugins","data","require","withVersion","applePlatform","createInfoPlistPluginWithPropertyGuard","setVersion","infoPlistProperty","expoConfigProperty","exports","withBuildNumber","config","infoPlist","setBuildNumber","getVersion","version","CFBundleShortVersionString","getBuildNumber","buildNumber","CFBundleVersion"],"sources":["../../src/apple/Version.ts"],"sourcesContent":["import { ExpoConfig } from '@expo/config-types';\n\nimport { InfoPlist } from './AppleConfig.types';\nimport { createInfoPlistPluginWithPropertyGuard } from '../plugins/apple-plugins';\n\nexport const withVersion = (applePlatform: 'ios' | 'macos') =>\n  createInfoPlistPluginWithPropertyGuard(applePlatform)(\n    setVersion,\n    {\n      infoPlistProperty: 'CFBundleShortVersionString',\n      expoConfigProperty: 'version',\n    },\n    'withVersion'\n  );\n\nexport const withBuildNumber = (applePlatform: 'ios' | 'macos') =>\n  createInfoPlistPluginWithPropertyGuard(applePlatform)(\n    (config: Pick<ExpoConfig, typeof applePlatform>, infoPlist: InfoPlist) =>\n      setBuildNumber(applePlatform, config, infoPlist),\n    {\n      infoPlistProperty: 'CFBundleVersion',\n      expoConfigProperty: `${applePlatform}.buildNumber`,\n    },\n    'withBuildNumber'\n  );\n\nexport function getVersion(config: Pick<ExpoConfig, 'version'>) {\n  return config.version || '1.0.0';\n}\n\nexport function setVersion(config: Pick<ExpoConfig, 'version'>, infoPlist: InfoPlist): InfoPlist {\n  return {\n    ...infoPlist,\n    CFBundleShortVersionString: getVersion(config),\n  };\n}\n\nexport function getBuildNumber(\n  applePlatform: 'ios' | 'macos',\n  config: Pick<ExpoConfig, typeof applePlatform>\n) {\n  return config[applePlatform]?.buildNumber ? config[applePlatform]!.buildNumber : '1';\n}\n\nexport function setBuildNumber(\n  applePlatform: 'ios' | 'macos',\n  config: Pick<ExpoConfig, typeof applePlatform>,\n  infoPlist: InfoPlist\n): InfoPlist {\n  return {\n    ...infoPlist,\n    CFBundleVersion: getBuildNumber(applePlatform, config),\n  };\n}\n"],"mappings":";;;;;;;;;;AAGA,SAAAA,cAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,aAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEO,MAAME,WAAW,GAAIC,aAA8B,IACxD,IAAAC,sDAAsC,EAACD,aAAa,CAAC,CACnDE,UAAU,EACV;EACEC,iBAAiB,EAAE,4BAA4B;EAC/CC,kBAAkB,EAAE;AACtB,CAAC,EACD,aACF,CAAC;AAACC,OAAA,CAAAN,WAAA,GAAAA,WAAA;AAEG,MAAMO,eAAe,GAAIN,aAA8B,IAC5D,IAAAC,sDAAsC,EAACD,aAAa,CAAC,CACnD,CAACO,MAA8C,EAAEC,SAAoB,KACnEC,cAAc,CAACT,aAAa,EAAEO,MAAM,EAAEC,SAAS,CAAC,EAClD;EACEL,iBAAiB,EAAE,iBAAiB;EACpCC,kBAAkB,EAAG,GAAEJ,aAAc;AACvC,CAAC,EACD,iBACF,CAAC;AAACK,OAAA,CAAAC,eAAA,GAAAA,eAAA;AAEG,SAASI,UAAUA,CAACH,MAAmC,EAAE;EAC9D,OAAOA,MAAM,CAACI,OAAO,IAAI,OAAO;AAClC;AAEO,SAAST,UAAUA,CAACK,MAAmC,EAAEC,SAAoB,EAAa;EAC/F,OAAO;IACL,GAAGA,SAAS;IACZI,0BAA0B,EAAEF,UAAU,CAACH,MAAM;EAC/C,CAAC;AACH;AAEO,SAASM,cAAcA,CAC5Bb,aAA8B,EAC9BO,MAA8C,EAC9C;EACA,OAAOA,MAAM,CAACP,aAAa,CAAC,EAAEc,WAAW,GAAGP,MAAM,CAACP,aAAa,CAAC,CAAEc,WAAW,GAAG,GAAG;AACtF;AAEO,SAASL,cAAcA,CAC5BT,aAA8B,EAC9BO,MAA8C,EAC9CC,SAAoB,EACT;EACX,OAAO;IACL,GAAGA,SAAS;IACZO,eAAe,EAAEF,cAAc,CAACb,aAAa,EAAEO,MAAM;EACvD,CAAC;AACH"}