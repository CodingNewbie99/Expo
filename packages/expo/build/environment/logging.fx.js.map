{"version":3,"sources":["../../../src/environment/logging.fx.ts"],"sourcesContent":["import Constants from 'expo-constants';\nimport getDevServer from 'react-native/Libraries/Core/Devtools/getDevServer';\n\n// Metro and terser don't seem to be capable of shaking the imports unless they're wrapped in __DEV__.\nif (__DEV__) {\n  // If the app is being run outside of the Expo Go app and not using expo-dev-menu,\n  // then we can attempt to polyfill the `logUrl` to enable console logging in the CLI.\n  if (\n    // If this is defined then we can be define Constants.manifest.logUrl without worrying about the warning.\n    Constants.__unsafeNoWarnManifest &&\n    // Only attempt to set the URL if `Constants.__unsafeNoWarnManifest.logUrl` is not defined.\n    !Constants.__unsafeNoWarnManifest.logUrl\n  ) {\n    const devServerInfo = getDevServer();\n    // Ensure the URL is remote and not local. i.e `file://`\n    if (devServerInfo.bundleLoadedFromServer) {\n      // url: `http://localhost:8081/`\n      const url = !devServerInfo.url.endsWith('/') ? `${devServerInfo.url}/` : devServerInfo.url;\n      // The standard Expo logUrl is `http://localhost:19000/logs`, this code assumes that the `logs` endpoint doesn't change.\n\n      const logUrl = url + 'logs';\n      Constants.__unsafeNoWarnManifest.logUrl = logUrl;\n      if (Constants.manifest) {\n        Constants.manifest.logUrl = logUrl;\n      }\n    }\n  } else if (\n    // If this is defined then we can be define Constants.manifest2.extra.expoGo.logUrl without worrying about the warning.\n    Constants.__unsafeNoWarnManifest2 &&\n    // Only attempt to set the URL if `Constants.__unsafeNoWarnManifest2.logUrl` is not defined.\n    !Constants.__unsafeNoWarnManifest2.extra?.expoGo?.logUrl\n  ) {\n    const devServerInfo = getDevServer();\n    // Ensure the URL is remote and not local. i.e `file://`\n    if (devServerInfo.bundleLoadedFromServer) {\n      // url: `http://localhost:8081/`\n      const url = !devServerInfo.url.endsWith('/') ? `${devServerInfo.url}/` : devServerInfo.url;\n      // The standard Expo logUrl is `http://localhost:19000/logs`, this code assumes that the `logs` endpoint doesn't change.\n\n      const logUrl = url + 'logs';\n      if (Constants.__unsafeNoWarnManifest2.extra?.expoGo) {\n        Constants.__unsafeNoWarnManifest2.extra.expoGo.logUrl = logUrl;\n      }\n      if (Constants.manifest2?.extra?.expoGo) {\n        Constants.manifest2.extra.expoGo.logUrl = logUrl;\n      }\n    }\n  }\n  // TODO: Maybe warn that console logging will not be enabled.\n\n  if (\n    Constants.__unsafeNoWarnManifest?.logUrl ||\n    Constants.__unsafeNoWarnManifest2?.extra?.expoGo?.logUrl\n  ) {\n    // Enable logging to the Expo dev tools only if this JS is not running in a web browser (ex: the\n    // remote debugger). In Expo Web we don't show console logs in the CLI, so there's no special case needed.\n    if (!isRunningInWebBrowser()) {\n      const Logs = require('../logs/Logs');\n      Logs.enableExpoCliLogging();\n    } else {\n      const RemoteLogging = require('../logs/RemoteLogging').default;\n      RemoteLogging.enqueueRemoteLogAsync('info', {}, [\n        'You are now debugging remotely; check your browser console for your application logs.',\n      ]);\n    }\n  }\n}\n/**\n * In all web browsers navigator.product is \"Gecko\" for compatibility reasons.\n * See https://developer.mozilla.org/en-US/docs/Web/API/NavigatorID/product\n * and the discussion at https://github.com/expo/expo/pull/8807#discussion_r441391148.\n */\nfunction isRunningInWebBrowser() {\n  return navigator?.product === 'Gecko';\n}\n"],"names":["Constants","getDevServer","__DEV__","__unsafeNoWarnManifest","logUrl","devServerInfo","bundleLoadedFromServer","url","endsWith","manifest","__unsafeNoWarnManifest2","extra","expoGo","manifest2","isRunningInWebBrowser","Logs","require","enableExpoCliLogging","RemoteLogging","default","enqueueRemoteLogAsync","navigator","product"],"mappings":"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"}