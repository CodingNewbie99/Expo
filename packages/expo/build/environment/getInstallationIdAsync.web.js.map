{"version":3,"sources":["../../../src/environment/getInstallationIdAsync.web.ts"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\n\nconst INSTALLATION_ID_KEY = 'installationId';\n\nlet installationId: string | null = null;\n\nexport default async function getInstallationIdAsync() {\n  // Already cached value\n  if (installationId) {\n    return installationId;\n  }\n\n  try {\n    // No cached value, fetch from persisted storage\n    installationId = localStorage.getItem(INSTALLATION_ID_KEY);\n    if (installationId) {\n      return installationId;\n    }\n  } catch (error) {\n    // If we weren't able to fetch one (for whatever reason)\n    // let's create a new one.\n  }\n\n  // No persisted value, set the cached value...\n  installationId = uuidv4();\n  // ...and try to persist it. Ignore the errors.\n  try {\n    localStorage.setItem(INSTALLATION_ID_KEY, installationId);\n  } catch (error) {\n    console.debug('Could not save installation ID in persisted storage, it will get reset.', error);\n  }\n\n  return installationId;\n}\n"],"names":["v4","uuidv4","INSTALLATION_ID_KEY","installationId","getInstallationIdAsync","localStorage","getItem","error","setItem","console","debug"],"mappings":"AAAA,MAAM,GAAGA,EAAE,IAAIC,MAAM,QAAQ,CAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEnC,KAAK,CAACC,mBAAmB,GAAG,CAAgB;AAE5C,GAAG,CAACC,cAAc,GAAkB,IAAI;AAExC,MAAM,kBAAwBC,sBAAsB;WAAtBA,uBAAsB;;SAAtBA,uBAAsB;IAAtBA,uBAAsB,qBAArC,QAAQ,IAAgC,CAAC;QACtD,EAAuB,AAAvB,qBAAuB;QACvB,EAAE,EAAED,cAAc,EAAE,CAAC;YACnB,MAAM,CAACA,cAAc;QACvB,CAAC;QAED,GAAG,CAAC,CAAC;YACH,EAAgD,AAAhD,8CAAgD;YAChDA,cAAc,GAAGE,YAAY,CAACC,OAAO,CAACJ,mBAAmB;YACzD,EAAE,EAAEC,cAAc,EAAE,CAAC;gBACnB,MAAM,CAACA,cAAc;YACvB,CAAC;QACH,CAAC,CAAC,KAAK,EAAEI,KAAK,EAAE,CAAC;QACf,EAAwD,AAAxD,sDAAwD;QACxD,EAA0B,AAA1B,wBAA0B;QAC5B,CAAC;QAED,EAA8C,AAA9C,4CAA8C;QAC9CJ,cAAc,GAAGF,MAAM;QACvB,EAA+C,AAA/C,6CAA+C;QAC/C,GAAG,CAAC,CAAC;YACHI,YAAY,CAACG,OAAO,CAACN,mBAAmB,EAAEC,cAAc;QAC1D,CAAC,CAAC,KAAK,EAAEI,MAAK,EAAE,CAAC;YACfE,OAAO,CAACC,KAAK,CAAC,CAAyE,0EAAEH,MAAK;QAChG,CAAC;QAED,MAAM,CAACJ,cAAc;IACvB,CAAC;WA3B6BC,uBAAsB"}