{"version":3,"sources":["../../../cli/utils/profile.ts"],"sourcesContent":["import chalk from 'chalk';\n\nimport * as Log from '../Log';\n\n/**\n * Wrap a method and profile the time it takes to execute the method using `EXPO_PROFILE`.\n * Works best with named functions (i.e. not arrow functions).\n *\n * @param fn\n * @param functionName\n */\nexport const profile = <T extends any[], U>(fn: (...args: T) => U, functionName?: string) => {\n  const name = chalk.dim(`⏱  [profile] ${functionName ?? (fn.name || 'unknown')}`);\n  return (...args: T): U => {\n    Log.time(name);\n    const results = fn(...args);\n    if (results instanceof Promise) {\n      // @ts-ignore\n      return new Promise<U>((resolve, reject) => {\n        results\n          .then((results) => {\n            resolve(results);\n            Log.timeEnd(name);\n          })\n          .catch((error) => {\n            reject(error);\n            Log.timeEnd(name);\n          });\n      });\n    } else {\n      Log.timeEnd(name);\n    }\n    return results;\n  };\n};\n"],"names":["Log","profile","fn","functionName","name","dim","args","time","results","Promise","resolve","reject","then","timeEnd","catch","error"],"mappings":";;;;;AAAkB,GAAO,CAAP,MAAO;AAEbA,GAAG,CAAHA,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;AASR,KAAK,CAACC,OAAO,IAAwBC,EAAqB,EAAEC,YAAqB,GAAK,CAAC;IAC5F,KAAK,CAACC,IAAI,GAZM,MAAO,SAYJC,GAAG,EAAE,eAAa,EAAEF,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAKD,EAAE,CAACE,IAAI,IAAI,CAAS;IAC5E,MAAM,KAAKE,IAAI,GAAW,CAAC;QAXjBN,GAAG,CAYPO,IAAI,CAACH,IAAI;QACb,KAAK,CAACI,QAAO,GAAGN,EAAE,IAAII,IAAI;QAC1B,EAAE,EAAEE,QAAO,YAAYC,OAAO,EAAE,CAAC;YAC/B,EAAa,AAAb,WAAa;YACb,MAAM,CAAC,GAAG,CAACA,OAAO,EAAKC,OAAO,EAAEC,MAAM,GAAK,CAAC;gBAC1CH,QAAO,CACJI,IAAI,EAAEJ,OAAO,GAAK,CAAC;oBAClBE,OAAO,CAACF,OAAO;oBAnBfR,GAAG,CAoBCa,OAAO,CAACT,IAAI;gBAClB,CAAC,EACAU,KAAK,EAAEC,KAAK,GAAK,CAAC;oBACjBJ,MAAM,CAACI,KAAK;oBAvBZf,GAAG,CAwBCa,OAAO,CAACT,IAAI;gBAClB,CAAC;YACL,CAAC;QACH,CAAC,MAAM,CAAC;YA3BAJ,GAAG,CA4BLa,OAAO,CAACT,IAAI;QAClB,CAAC;QACD,MAAM,CAACI,QAAO;IAChB,CAAC;AACH,CAAC;QAvBYP,OAAO,GAAPA,OAAO"}