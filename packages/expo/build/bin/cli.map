{"version":3,"sources":["../../bin/cli.ts"],"sourcesContent":["#!/usr/bin/env node\nimport arg from 'arg';\nimport chalk from 'chalk';\n\n['react', 'react-native'].forEach((dependency) => {\n  try {\n    // When 'npm link' is used it checks the clone location. Not the project.\n    require.resolve(dependency);\n  } catch (err) {\n    console.warn(\n      `The module '${dependency}' was not found. Expo requires that you include it in 'dependencies' of your 'package.json'. To add it, run 'npm install ${dependency}'`\n    );\n  }\n});\n\nconst defaultCommand = 'config';\nexport type cliCommand = (argv?: string[]) => void;\nconst commands: { [command: string]: () => Promise<cliCommand> } = {\n  config: () => import('../cli/config').then((i) => i.expoConfig),\n};\n\nconst args = arg(\n  {\n    // Types\n    '--version': Boolean,\n    '--help': Boolean,\n\n    // Aliases\n    '-v': '--version',\n    '-h': '--help',\n  },\n  {\n    permissive: true,\n  }\n);\n\n// Version is inlined into the file using taskr build pipeline\nif (args['--version']) {\n  console.log(`expo v${process.env.__EXPO_VERSION}`);\n  process.exit(0);\n}\n\n// Check if we are running `expo <subcommand>` or `expo`\nconst foundCommand = Boolean(commands[args._[0]]);\n\n// Makes sure the `expo --help` case is covered\n// This help message is only showed for `expo --help`\n// `expo <subcommand> --help` falls through to be handled later\nif (!foundCommand && args['--help']) {\n  console.log(chalk`\n    {bold Usage}\n      {bold $} npx expo <command>\n\n    {bold Available commands}\n      ${Object.keys(commands).join(', ')}\n\n    {bold Options}\n      --version, -v   Version number\n      --help, -h      Displays this message\n\n    For more information run a command with the --help flag\n      {bold $} expo start --help\n  `);\n  process.exit(0);\n}\n\nconst command = foundCommand ? args._[0] : defaultCommand;\nconst forwardedArgs = foundCommand ? args._.slice(1) : args._;\n\n// Make sure the `expo <subcommand> --help` case is covered\nif (args['--help']) {\n  forwardedArgs.push('--help');\n}\n\n// Make sure commands gracefully respect termination signals (e.g. from Docker)\nprocess.on('SIGTERM', () => process.exit(0));\nprocess.on('SIGINT', () => process.exit(0));\n\ncommands[command]().then((exec) => exec(forwardedArgs));\n"],"names":["forEach","dependency","require","resolve","err","console","warn","defaultCommand","commands","config","then","i","expoConfig","args","Boolean","permissive","log","process","env","__EXPO_VERSION","exit","foundCommand","_","Object","keys","join","command","forwardedArgs","slice","push","on","exec"],"mappings":";;AACgB,GAAK,CAAL,IAAK;AACH,GAAO,CAAP,MAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEzB,CAAC;IAAA,CAAO;IAAE,CAAc;AAAA,CAAC,CAACA,OAAO,EAAEC,UAAU,GAAK,CAAC;IACjD,GAAG,CAAC,CAAC;QACH,EAAyE,AAAzE,uEAAyE;QACzEC,OAAO,CAACC,OAAO,CAACF,UAAU;IAC5B,CAAC,CAAC,KAAK,EAAEG,GAAG,EAAE,CAAC;QACbC,OAAO,CAACC,IAAI,EACT,YAAY,EAAEL,UAAU,CAAC,yHAAyH,EAAEA,UAAU,CAAC,CAAC;IAErK,CAAC;AACH,CAAC;AAED,KAAK,CAACM,cAAc,GAAG,CAAQ;AAE/B,KAAK,CAACC,QAAQ,GAAqD,CAAC;IAClEC,MAAM;mDAAe,CAAe;WAAEC,IAAI,EAAEC,CAAC,GAAKA,CAAC,CAACC,UAAU;;AAChE,CAAC;AAED,KAAK,CAACC,IAAI,OApBM,IAAK,UAqBnB,CAAC;IACC,EAAQ,AAAR,MAAQ;IACR,CAAW,YAAEC,OAAO;IACpB,CAAQ,SAAEA,OAAO;IAEjB,EAAU,AAAV,QAAU;IACV,CAAI,KAAE,CAAW;IACjB,CAAI,KAAE,CAAQ;AAChB,CAAC,EACD,CAAC;IACCC,UAAU,EAAE,IAAI;AAClB,CAAC;AAGH,EAA8D,AAA9D,4DAA8D;AAC9D,EAAE,EAAEF,IAAI,CAAC,CAAW,aAAG,CAAC;IACtBR,OAAO,CAACW,GAAG,EAAE,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,cAAc;IAC/CF,OAAO,CAACG,IAAI,CAAC,CAAC;AAChB,CAAC;AAED,EAAwD,AAAxD,sDAAwD;AACxD,KAAK,CAACC,YAAY,GAAGP,OAAO,CAACN,QAAQ,CAACK,IAAI,CAACS,CAAC,CAAC,CAAC;AAE9C,EAA+C,AAA/C,6CAA+C;AAC/C,EAAqD,AAArD,mDAAqD;AACrD,EAA+D,AAA/D,6DAA+D;AAC/D,EAAE,GAAGD,YAAY,IAAIR,IAAI,CAAC,CAAQ,UAAG,CAAC;IACpCR,OAAO,CAACW,GAAG,CA/CK,MAAO,SA+CL;;;;;MAKd,EAAEO,MAAM,CAACC,IAAI,CAAChB,QAAQ,EAAEiB,IAAI,CAAC,CAAI,KAAE;;;;;;;;EAQvC;IACAR,OAAO,CAACG,IAAI,CAAC,CAAC;AAChB,CAAC;AAED,KAAK,CAACM,OAAO,GAAGL,YAAY,GAAGR,IAAI,CAACS,CAAC,CAAC,CAAC,IAAIf,cAAc;AACzD,KAAK,CAACoB,aAAa,GAAGN,YAAY,GAAGR,IAAI,CAACS,CAAC,CAACM,KAAK,CAAC,CAAC,IAAIf,IAAI,CAACS,CAAC;AAE7D,EAA2D,AAA3D,yDAA2D;AAC3D,EAAE,EAAET,IAAI,CAAC,CAAQ,UAAG,CAAC;IACnBc,aAAa,CAACE,IAAI,CAAC,CAAQ;AAC7B,CAAC;AAED,EAA+E,AAA/E,6EAA+E;AAC/EZ,OAAO,CAACa,EAAE,CAAC,CAAS,cAAQb,OAAO,CAACG,IAAI,CAAC,CAAC;;AAC1CH,OAAO,CAACa,EAAE,CAAC,CAAQ,aAAQb,OAAO,CAACG,IAAI,CAAC,CAAC;;AAEzCZ,QAAQ,CAACkB,OAAO,IAAIhB,IAAI,EAAEqB,IAAI,GAAKA,IAAI,CAACJ,aAAa"}