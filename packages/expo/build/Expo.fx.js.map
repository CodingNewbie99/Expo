{"version":3,"file":"Expo.fx.js","sourceRoot":"","sources":["../src/Expo.fx.tsx"],"names":[],"mappings":"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","sourcesContent":["// load remote logging for compatibility with custom development clients\nimport './environment/validate.fx';\nimport './environment/logging.fx';\nimport './environment/react-native-logs.fx';\n// load expo-asset immediately to set a custom `source` transformer in React Native\nimport 'expo-asset';\n\nimport React from 'react';\nimport { NativeModulesProxy, Platform } from '@unimodules/core';\nimport Constants, { ExecutionEnvironment } from 'expo-constants';\nimport { AppRegistry, StyleSheet } from 'react-native';\n\n// install globals\ndeclare let module: any;\n\nimport DevAppContainer from './environment/DevAppContainer';\nimport { installWebGeolocationPolyfill } from 'expo-location';\nimport * as Font from 'expo-font';\n// Represents an app running in the store client or an app built with the legacy `expo build` command.\n// `false` when running in bare workflow, custom dev clients, or `eas build`s (managed or bare).\n// This should be used to ensure code that _should_ exist is treated as such.\nconst isManagedEnvironment =\n  Constants.executionEnvironment === ExecutionEnvironment.Standalone ||\n  Constants.executionEnvironment === ExecutionEnvironment.StoreClient;\n\n// Legacy convenience warning, this will be stripped in production.\nif (__DEV__) {\n  if (Constants.manifest?.experiments?.redesignedLogBox) {\n    console.warn(\n      'LogBox is enabled by default on SDK 39 and higher. You can now remove the experiments.redesignedLogBox from your app configuration to get rid of this warning.'\n    );\n  }\n}\n\n// If expo-font is installed and the style preprocessor is available, use it to parse fonts.\nif (StyleSheet.setStyleAttributePreprocessor) {\n  StyleSheet.setStyleAttributePreprocessor('fontFamily', Font.processFontFamily);\n}\n\n// polyfill navigator.geolocation\n// TODO: Deprecate this in the future because the side effect is just a convenience.\ninstallWebGeolocationPolyfill();\n\nif (module && module.exports && global) {\n  try {\n    // This is more risky so we wrap it in a try/catch in bare workflow. \n    // No one should be using this global anymore and it'll be deprecated.\n    const globals = require('./globals');\n\n    // @ts-ignore\n    global.__exponent = globals;\n    // @ts-ignore\n    global.__expo = globals;\n    // @ts-ignore\n    global.Expo = globals;\n  } catch (error) {\n    if (isManagedEnvironment) {\n      throw error;\n    }\n  }\n}\n\n// TODO(NO_MERGE): In theory, shouldn't this also run in managed workflow so there is no unexpected error being thrown in a managed `eas build`?\nif (!isManagedEnvironment) {\n  if (NativeModulesProxy.ExpoUpdates?.isMissingRuntimeVersion) {\n    const message =\n      'expo-updates is installed but there is no runtime or SDK version configured. ' +\n      \"You'll need to configure one of these two properties in \" +\n      Platform.select({ ios: 'Expo.plist', android: 'AndroidManifest.xml' }) +\n      ' before OTA updates will work properly.';\n    if (__DEV__) {\n      console.warn(message);\n    } else {\n      throw new Error(message);\n    }\n  }\n}\n\n// Disable the blue loading box because `NativeModules.DevLoadingView` is not fully available in bare workflow.\nif (isManagedEnvironment) {\n  // add the dev app container wrapper component on ios\n  if (__DEV__ && Platform.OS === 'ios') {\n    // @ts-ignore\n    AppRegistry.setWrapperComponentProvider(() => DevAppContainer);\n\n    // @ts-ignore\n    const originalSetWrapperComponentProvider = AppRegistry.setWrapperComponentProvider;\n\n    // @ts-ignore\n    AppRegistry.setWrapperComponentProvider = provider => {\n      function PatchedProviderComponent(props: any) {\n        const ProviderComponent = provider();\n\n        return (\n          <DevAppContainer>\n            <ProviderComponent {...props} />\n          </DevAppContainer>\n        );\n      }\n\n      originalSetWrapperComponentProvider(() => PatchedProviderComponent);\n    };\n  }\n}\n"]}