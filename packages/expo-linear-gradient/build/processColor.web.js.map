{"version":3,"file":"processColor.web.js","sourceRoot":"","sources":["../src/processColor.web.ts"],"names":[],"mappings":"AAAA,MAAM,YAAY,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAElC,mEAAmE;AACnE,SAAS,WAAW,CAAC,KAAK;IACxB,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,YAAY,CAAC;KACrB;IACD,IAAI,KAAK,CAAC,WAAW,EAAE,KAAK,aAAa,EAAE;QACzC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACrB;IACD,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QACpB,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACpB,kDAAkD;YAClD,KAAK;gBACH,GAAG;oBACH,KAAK,CAAC,CAAC,CAAC;oBACR,KAAK,CAAC,CAAC,CAAC;oBACR,KAAK,CAAC,CAAC,CAAC;oBACR,KAAK,CAAC,CAAC,CAAC;oBACR,KAAK,CAAC,CAAC,CAAC;oBACR,KAAK,CAAC,CAAC,CAAC;oBACR,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;SACjD;QACD,OAAO;YACL,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;YAChC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;YAChC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;YAChC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;SAC9D,CAAC;KACH;IACD,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;QAC/B,uBAAuB;QACvB,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,sFAAsF;QACnK,IAAI,IAAI,GAAG,cAAc,CAAC,CAAC,iEAAiE;QAC5F,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;QAC7B,IAAI,SAAS,CAAC,KAAK,CAAC,KAAK,KAAK,IAAI,EAAE;YAClC,6FAA6F;YAC7F,OAAO,YAAY,CAAC;SACrB;QACD,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QAC9B,IAAI,SAAS,CAAC,KAAK,CAAC,KAAK,KAAK,IAAI,IAAI,SAAS,CAAC,KAAK,CAAC,KAAK,KAAK,EAAE,EAAE;YAClE,OAAO,YAAY,CAAC,CAAC,qBAAqB;SAC3C;QACD,KAAK,GAAG,gBAAgB,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;QAC1C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;KACtC;IACD,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;QAC9B,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;YAChC,KAAK,IAAI,IAAI,CAAC,CAAC,yFAAyF;SACzG;QACD,OAAO,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,UAAS,CAAC;YAC3C,OAAO,CAAC,CAAC,CAAC;QACZ,CAAC,CAAC,CAAC;KACJ;AACH,CAAC;AAED,eAAe,KAAK,CAAC,EAAE;IACrB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;IACxC,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;AACrC,CAAC,CAAC","sourcesContent":["const defaultColor = [0, 0, 0, 0];\n\n// https://gist.github.com/oriadam/396a4beaaad465ca921618f2f2444d49\nfunction colorValues(color) {\n  if (!color) {\n    return defaultColor;\n  }\n  if (color.toLowerCase() === 'transparent') {\n    return [0, 0, 0, 0];\n  }\n  if (color[0] === '#') {\n    if (color.length < 7) {\n      // convert #RGB and #RGBA to #RRGGBB and #RRGGBBAA\n      color =\n        '#' +\n        color[1] +\n        color[1] +\n        color[2] +\n        color[2] +\n        color[3] +\n        color[3] +\n        (color.length > 4 ? color[4] + color[4] : '');\n    }\n    return [\n      parseInt(color.substr(1, 2), 16),\n      parseInt(color.substr(3, 2), 16),\n      parseInt(color.substr(5, 2), 16),\n      color.length > 7 ? parseInt(color.substr(7, 2), 16) / 255 : 1,\n    ];\n  }\n  if (color.indexOf('rgb') === -1) {\n    // convert named colors\n    let temp_elem = document.body.appendChild(document.createElement('fictum')); // intentionally use unknown tag to lower chances of css rule override with !important\n    let flag = 'rgb(1, 2, 3)'; // this flag tested on chrome 59, ff 53, ie9, ie10, ie11, edge 14\n    temp_elem.style.color = flag;\n    if (temp_elem.style.color !== flag) {\n      // color set failed - some monstrous css rule is probably taking over the color of our object\n      return defaultColor;\n    }\n    temp_elem.style.color = color;\n    if (temp_elem.style.color === flag || temp_elem.style.color === '') {\n      return defaultColor; // color parse failed\n    }\n    color = getComputedStyle(temp_elem).color;\n    document.body.removeChild(temp_elem);\n  }\n  if (color.indexOf('rgb') === 0) {\n    if (color.indexOf('rgba') === -1) {\n      color += ',1'; // convert 'rgb(R,G,B)' to 'rgb(R,G,B)A' which looks awful but will pass the regxep below\n    }\n    return color.match(/[\\.\\d]+/g).map(function(a) {\n      return +a;\n    });\n  }\n}\n\nexport default color => {\n  const [r, g, b, a] = colorValues(color);\n  return `rgba(${r},${g},${b},${a})`;\n};\n"]}